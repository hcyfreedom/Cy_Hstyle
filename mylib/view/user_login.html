<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="<?=STATIC_DIR;?>js/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="<?=STATIC_DIR;?>images/login.js"></script>
    <link href="<?=STATIC_DIR;?>login2.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet"  href="<?=STATIC_DIR;?>css/font-awesome.css">
    <title>用户图书馆登陆</title>
    <link href="<?=STATIC_DIR;?>css2.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="bar"></div>
<div class="main">
    <div class="nav">
        <div class="nav_left">
            <img src="<?=STATIC_DIR;?>images/logo.png" alt="山大校徽">
        </div>
        <div class="nav_middle">
            <div class="nav_middle_top"><p>山东大学</p></div>
            <div class="nav_middle_bottom"><p>图书馆</p></div>
        </div>
        <div class="nav_right">
            <p>欢&nbsp迎&nbsp使&nbsp用</p>
        </div>
    </div><!--导航栏nav结束-->
    <!--<div class="loadBox">-->
        <!--<ul class="load_cont">-->
            <!--<li class="l_tit">用户名</li>-->
            <!--<li class="mb_10"><input type="text" class="load_input"><i class="fa icon-user"></i></li>-->
            <!--<li class="l_tit">密码</li>-->
            <!--<li class="mb_10"><input type="text" class="load_input"><i class="fa icon-key"></i> </li>-->
            <!--<li class="load_auto"><input type="checkbox" id="a1" class="checked"><label for="a1">自动登陆</label> </li>-->
            <!--<li><input type="button" value="" class="load_btn"></li>-->
        <!--</ul>-->
        <!--<div class="or_reg"><a href="register.html"><p>注册？</p></a> </div>-->
    <!--</div>-->
    <div class="login" style="margin-top:50px;">

        <div class="header">
            <div class="switch" id="switch"><a class="switch_btn_focus" id="switch_qlogin" href="javascript:void(0);" tabindex="7">快速登录</a>
                <a class="switch_btn" id="switch_login" href="javascript:void(0);" tabindex="8">快速注册</a><div class="switch_bottom" id="switch_bottom" style="position: absolute; width: 64px; left: 0px;"></div>
            </div>
        </div>


        <div class="web_qr_login" id="web_qr_login" style="display: block; height: 235px;">

            <!--登录-->
            <div class="web_login" id="web_login">


                <div class="login-box">


                    <div class="login_form">
                        <form action="#" name="loginform" accept-charset="utf-8" id="login_form" class="loginForm" method="POST"><input type="hidden" name="did" value="0"/>
                            <input type="hidden" name="to" value="log"/>
                            <div class="uinArea" id="uinArea">
                                <label class="input-tips" for="u">帐号：</label>
                                <div class="inputOuter" id="uArea">

                                    <input type="text" id="u" name="username" class="inputstyle"/>
                                </div>
                            </div>
                            <div class="pwdArea" id="pwdArea">
                                <label class="input-tips" for="p">密码：</label>
                                <div class="inputOuter" id="pArea">

                                    <input type="password" id="p" name="password" class="inputstyle"/>
                                </div>
                            </div>

                            <div style="padding-left:30px;margin-top:50px;"><input type="button" value="登 录" style="width:150px;" class="button_blue" onclick="login()"/></div>
                        </form>
                    </div>

                </div>

            </div>
            <!--登录end-->
        </div>

        <!--注册-->
        <div class="qlogin" id="qlogin" style="display: none; ">

            <div class="web_login"><form name="form2" id="regUser" accept-charset="utf-8"  action="#" method="post">
                <input type="hidden" name="to" value="reg"/>
                <input type="hidden" name="did" value="0"/>
                <ul class="reg_form" id="reg-ul">
                    <div id="userCue" class="cue">快速注册请注意格式</div>
                    <li>

                        <label for="username"  class="input-tips2">用户名：</label>
                        <div class="inputOuter2">
                            <input type="text" id="username" name="username" maxlength="16" class="inputstyle2"/>
                        </div>

                    </li>

                    <li>
                        <label for="password" class="input-tips2">密码：</label>
                        <div class="inputOuter2">
                            <input type="password" id="password"  name="password" maxlength="16" class="inputstyle2"/>
                        </div>

                    </li>
                    <!--<li>-->
                        <!--<label for="passwd2" class="input-tips2">确认密码：</label>-->
                        <!--<div class="inputOuter2">-->
                            <!--<input type="password" id="passwd2" name="" maxlength="16" class="inputstyle2" />-->
                        <!--</div>-->

                    <!--</li>-->

                    <li>
                        <label for="gender" class="input-tips2">性别：</label>
                        <div class="inputOuter2">

                            <input type="text" id="gender" name="gender" maxlength="10" class="inputstyle2"/>
                        </div>

                    </li>

                    <li>
                        <div class="inputArea">
                            <input type="button" id="reg"  style="margin-top:10px;margin-left:85px;" class="button_blue" value="同意协议并注册" onclick="sign_up()"/> <a href="#" class="zcxy" target="_blank">注册协议</a>
                        </div>

                    </li><div class="cl"></div>
                </ul></form>


            </div>


        </div>
        <!--注册end-->
    </div>
<div class="last">
    <p>欢&nbsp迎&nbsp来&nbsp到&nbsp山&nbsp东&nbsp大&nbsp学&nbsp图&nbsp书&nbsp馆</p>
</div>

</body>
<script>
    function sign_up() {
        $.ajax({
            url: '<?=API;?>user',
            type: 'post',
            data: {
                username: $('#username').val(),
                password: $('#password').val(),
                gender: $('#gender').val()
            },
            success: function(data){//注册用户的信息返回到这里，data参数里
                if(data == 0){
                    alert('注册成功!');
                    window.location.href="<?=ROOT_DIR;?>user";
                }
                else
                    alert(data);
            }
        });
    }

    function login(){
        $.ajax({
            url: '<?=API;?>auth',
            type: 'post',
            data:{
                username: $('#u').val(),
                password: $('#p').val()
            },
            success: function(data){//登陆用户的信息返回到这里，data参数里
                if(data == 0)
                    window.location.href="<?=ROOT_DIR;?>user";
                else{
                    alert(data);
                }
            }
        });
    }
</script>
</html>